{"version":3,"file":"pixi-gif.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/js-binary-schema-parser/lib/index.js","../node_modules/js-binary-schema-parser/lib/parsers/uint8.js","../node_modules/js-binary-schema-parser/lib/schemas/gif.js","../node_modules/gifuct-js/lib/deinterlace.js","../node_modules/gifuct-js/lib/lzw.js","../node_modules/gifuct-js/lib/index.js","../src/AnimatedGIF.ts","../src/AnimatedGIFLoader.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loop = exports.conditional = exports.parse = void 0;\n\nvar parse = function parse(stream, schema) {\n  var result = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var parent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : result;\n\n  if (Array.isArray(schema)) {\n    schema.forEach(function (partSchema) {\n      return parse(stream, partSchema, result, parent);\n    });\n  } else if (typeof schema === 'function') {\n    schema(stream, result, parent, parse);\n  } else {\n    var key = Object.keys(schema)[0];\n\n    if (Array.isArray(schema[key])) {\n      parent[key] = {};\n      parse(stream, schema[key], result, parent[key]);\n    } else {\n      parent[key] = schema[key](stream, result, parent, parse);\n    }\n  }\n\n  return result;\n};\n\nexports.parse = parse;\n\nvar conditional = function conditional(schema, conditionFunc) {\n  return function (stream, result, parent, parse) {\n    if (conditionFunc(stream, result, parent)) {\n      parse(stream, schema, result, parent);\n    }\n  };\n};\n\nexports.conditional = conditional;\n\nvar loop = function loop(schema, continueFunc) {\n  return function (stream, result, parent, parse) {\n    var arr = [];\n    var lastStreamPos = stream.pos;\n\n    while (continueFunc(stream, result, parent)) {\n      var newParent = {};\n      parse(stream, schema, result, newParent); // cases when whole file is parsed but no termination is there and stream position is not getting updated as well\n      // it falls into infinite recursion, null check to avoid the same\n\n      if (stream.pos === lastStreamPos) {\n        break;\n      }\n\n      lastStreamPos = stream.pos;\n      arr.push(newParent);\n    }\n\n    return arr;\n  };\n};\n\nexports.loop = loop;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.readBits = exports.readArray = exports.readUnsigned = exports.readString = exports.peekBytes = exports.readBytes = exports.peekByte = exports.readByte = exports.buildStream = void 0;\n\n// Default stream and parsers for Uint8TypedArray data type\nvar buildStream = function buildStream(uint8Data) {\n  return {\n    data: uint8Data,\n    pos: 0\n  };\n};\n\nexports.buildStream = buildStream;\n\nvar readByte = function readByte() {\n  return function (stream) {\n    return stream.data[stream.pos++];\n  };\n};\n\nexports.readByte = readByte;\n\nvar peekByte = function peekByte() {\n  var offset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return function (stream) {\n    return stream.data[stream.pos + offset];\n  };\n};\n\nexports.peekByte = peekByte;\n\nvar readBytes = function readBytes(length) {\n  return function (stream) {\n    return stream.data.subarray(stream.pos, stream.pos += length);\n  };\n};\n\nexports.readBytes = readBytes;\n\nvar peekBytes = function peekBytes(length) {\n  return function (stream) {\n    return stream.data.subarray(stream.pos, stream.pos + length);\n  };\n};\n\nexports.peekBytes = peekBytes;\n\nvar readString = function readString(length) {\n  return function (stream) {\n    return Array.from(readBytes(length)(stream)).map(function (value) {\n      return String.fromCharCode(value);\n    }).join('');\n  };\n};\n\nexports.readString = readString;\n\nvar readUnsigned = function readUnsigned(littleEndian) {\n  return function (stream) {\n    var bytes = readBytes(2)(stream);\n    return littleEndian ? (bytes[1] << 8) + bytes[0] : (bytes[0] << 8) + bytes[1];\n  };\n};\n\nexports.readUnsigned = readUnsigned;\n\nvar readArray = function readArray(byteSize, totalOrFunc) {\n  return function (stream, result, parent) {\n    var total = typeof totalOrFunc === 'function' ? totalOrFunc(stream, result, parent) : totalOrFunc;\n    var parser = readBytes(byteSize);\n    var arr = new Array(total);\n\n    for (var i = 0; i < total; i++) {\n      arr[i] = parser(stream);\n    }\n\n    return arr;\n  };\n};\n\nexports.readArray = readArray;\n\nvar subBitsTotal = function subBitsTotal(bits, startIndex, length) {\n  var result = 0;\n\n  for (var i = 0; i < length; i++) {\n    result += bits[startIndex + i] && Math.pow(2, length - i - 1);\n  }\n\n  return result;\n};\n\nvar readBits = function readBits(schema) {\n  return function (stream) {\n    var _byte = readByte()(stream); // convert the byte to bit array\n\n\n    var bits = new Array(8);\n\n    for (var i = 0; i < 8; i++) {\n      bits[7 - i] = !!(_byte & 1 << i);\n    } // convert the bit array to values based on the schema\n\n\n    return Object.keys(schema).reduce(function (res, key) {\n      var def = schema[key];\n\n      if (def.length) {\n        res[key] = subBitsTotal(bits, def.index, def.length);\n      } else {\n        res[key] = bits[def.index];\n      }\n\n      return res;\n    }, {});\n  };\n};\n\nexports.readBits = readBits;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _ = require(\"../\");\n\nvar _uint = require(\"../parsers/uint8\");\n\n// a set of 0x00 terminated subblocks\nvar subBlocksSchema = {\n  blocks: function blocks(stream) {\n    var terminator = 0x00;\n    var chunks = [];\n    var streamSize = stream.data.length;\n    var total = 0;\n\n    for (var size = (0, _uint.readByte)()(stream); size !== terminator; size = (0, _uint.readByte)()(stream)) {\n      // size becomes undefined for some case when file is corrupted and  terminator is not proper \n      // null check to avoid recursion\n      if (!size) break; // catch corrupted files with no terminator\n\n      if (stream.pos + size >= streamSize) {\n        var availableSize = streamSize - stream.pos;\n        chunks.push((0, _uint.readBytes)(availableSize)(stream));\n        total += availableSize;\n        break;\n      }\n\n      chunks.push((0, _uint.readBytes)(size)(stream));\n      total += size;\n    }\n\n    var result = new Uint8Array(total);\n    var offset = 0;\n\n    for (var i = 0; i < chunks.length; i++) {\n      result.set(chunks[i], offset);\n      offset += chunks[i].length;\n    }\n\n    return result;\n  }\n}; // global control extension\n\nvar gceSchema = (0, _.conditional)({\n  gce: [{\n    codes: (0, _uint.readBytes)(2)\n  }, {\n    byteSize: (0, _uint.readByte)()\n  }, {\n    extras: (0, _uint.readBits)({\n      future: {\n        index: 0,\n        length: 3\n      },\n      disposal: {\n        index: 3,\n        length: 3\n      },\n      userInput: {\n        index: 6\n      },\n      transparentColorGiven: {\n        index: 7\n      }\n    })\n  }, {\n    delay: (0, _uint.readUnsigned)(true)\n  }, {\n    transparentColorIndex: (0, _uint.readByte)()\n  }, {\n    terminator: (0, _uint.readByte)()\n  }]\n}, function (stream) {\n  var codes = (0, _uint.peekBytes)(2)(stream);\n  return codes[0] === 0x21 && codes[1] === 0xf9;\n}); // image pipeline block\n\nvar imageSchema = (0, _.conditional)({\n  image: [{\n    code: (0, _uint.readByte)()\n  }, {\n    descriptor: [{\n      left: (0, _uint.readUnsigned)(true)\n    }, {\n      top: (0, _uint.readUnsigned)(true)\n    }, {\n      width: (0, _uint.readUnsigned)(true)\n    }, {\n      height: (0, _uint.readUnsigned)(true)\n    }, {\n      lct: (0, _uint.readBits)({\n        exists: {\n          index: 0\n        },\n        interlaced: {\n          index: 1\n        },\n        sort: {\n          index: 2\n        },\n        future: {\n          index: 3,\n          length: 2\n        },\n        size: {\n          index: 5,\n          length: 3\n        }\n      })\n    }]\n  }, (0, _.conditional)({\n    lct: (0, _uint.readArray)(3, function (stream, result, parent) {\n      return Math.pow(2, parent.descriptor.lct.size + 1);\n    })\n  }, function (stream, result, parent) {\n    return parent.descriptor.lct.exists;\n  }), {\n    data: [{\n      minCodeSize: (0, _uint.readByte)()\n    }, subBlocksSchema]\n  }]\n}, function (stream) {\n  return (0, _uint.peekByte)()(stream) === 0x2c;\n}); // plain text block\n\nvar textSchema = (0, _.conditional)({\n  text: [{\n    codes: (0, _uint.readBytes)(2)\n  }, {\n    blockSize: (0, _uint.readByte)()\n  }, {\n    preData: function preData(stream, result, parent) {\n      return (0, _uint.readBytes)(parent.text.blockSize)(stream);\n    }\n  }, subBlocksSchema]\n}, function (stream) {\n  var codes = (0, _uint.peekBytes)(2)(stream);\n  return codes[0] === 0x21 && codes[1] === 0x01;\n}); // application block\n\nvar applicationSchema = (0, _.conditional)({\n  application: [{\n    codes: (0, _uint.readBytes)(2)\n  }, {\n    blockSize: (0, _uint.readByte)()\n  }, {\n    id: function id(stream, result, parent) {\n      return (0, _uint.readString)(parent.blockSize)(stream);\n    }\n  }, subBlocksSchema]\n}, function (stream) {\n  var codes = (0, _uint.peekBytes)(2)(stream);\n  return codes[0] === 0x21 && codes[1] === 0xff;\n}); // comment block\n\nvar commentSchema = (0, _.conditional)({\n  comment: [{\n    codes: (0, _uint.readBytes)(2)\n  }, subBlocksSchema]\n}, function (stream) {\n  var codes = (0, _uint.peekBytes)(2)(stream);\n  return codes[0] === 0x21 && codes[1] === 0xfe;\n});\nvar schema = [{\n  header: [{\n    signature: (0, _uint.readString)(3)\n  }, {\n    version: (0, _uint.readString)(3)\n  }]\n}, {\n  lsd: [{\n    width: (0, _uint.readUnsigned)(true)\n  }, {\n    height: (0, _uint.readUnsigned)(true)\n  }, {\n    gct: (0, _uint.readBits)({\n      exists: {\n        index: 0\n      },\n      resolution: {\n        index: 1,\n        length: 3\n      },\n      sort: {\n        index: 4\n      },\n      size: {\n        index: 5,\n        length: 3\n      }\n    })\n  }, {\n    backgroundColorIndex: (0, _uint.readByte)()\n  }, {\n    pixelAspectRatio: (0, _uint.readByte)()\n  }]\n}, (0, _.conditional)({\n  gct: (0, _uint.readArray)(3, function (stream, result) {\n    return Math.pow(2, result.lsd.gct.size + 1);\n  })\n}, function (stream, result) {\n  return result.lsd.gct.exists;\n}), // content frames\n{\n  frames: (0, _.loop)([gceSchema, applicationSchema, commentSchema, imageSchema, textSchema], function (stream) {\n    var nextCode = (0, _uint.peekByte)()(stream); // rather than check for a terminator, we should check for the existence\n    // of an ext or image block to avoid infinite loops\n    //var terminator = 0x3B;\n    //return nextCode !== terminator;\n\n    return nextCode === 0x21 || nextCode === 0x2c;\n  })\n}];\nvar _default = schema;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deinterlace = void 0;\n\n/**\r\n * Deinterlace function from https://github.com/shachaf/jsgif\r\n */\nvar deinterlace = function deinterlace(pixels, width) {\n  var newPixels = new Array(pixels.length);\n  var rows = pixels.length / width;\n\n  var cpRow = function cpRow(toRow, fromRow) {\n    var fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width);\n    newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels));\n  }; // See appendix E.\n\n\n  var offsets = [0, 4, 2, 1];\n  var steps = [8, 8, 4, 2];\n  var fromRow = 0;\n\n  for (var pass = 0; pass < 4; pass++) {\n    for (var toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\n      cpRow(toRow, fromRow);\n      fromRow++;\n    }\n  }\n\n  return newPixels;\n};\n\nexports.deinterlace = deinterlace;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.lzw = void 0;\n\n/**\r\n * javascript port of java LZW decompression\r\n * Original java author url: https://gist.github.com/devunwired/4479231\r\n */\nvar lzw = function lzw(minCodeSize, data, pixelCount) {\n  var MAX_STACK_SIZE = 4096;\n  var nullCode = -1;\n  var npix = pixelCount;\n  var available, clear, code_mask, code_size, end_of_information, in_code, old_code, bits, code, i, datum, data_size, first, top, bi, pi;\n  var dstPixels = new Array(pixelCount);\n  var prefix = new Array(MAX_STACK_SIZE);\n  var suffix = new Array(MAX_STACK_SIZE);\n  var pixelStack = new Array(MAX_STACK_SIZE + 1); // Initialize GIF data stream decoder.\n\n  data_size = minCodeSize;\n  clear = 1 << data_size;\n  end_of_information = clear + 1;\n  available = clear + 2;\n  old_code = nullCode;\n  code_size = data_size + 1;\n  code_mask = (1 << code_size) - 1;\n\n  for (code = 0; code < clear; code++) {\n    prefix[code] = 0;\n    suffix[code] = code;\n  } // Decode GIF pixel stream.\n\n\n  var datum, bits, count, first, top, pi, bi;\n  datum = bits = count = first = top = pi = bi = 0;\n\n  for (i = 0; i < npix;) {\n    if (top === 0) {\n      if (bits < code_size) {\n        // get the next byte\n        datum += data[bi] << bits;\n        bits += 8;\n        bi++;\n        continue;\n      } // Get the next code.\n\n\n      code = datum & code_mask;\n      datum >>= code_size;\n      bits -= code_size; // Interpret the code\n\n      if (code > available || code == end_of_information) {\n        break;\n      }\n\n      if (code == clear) {\n        // Reset decoder.\n        code_size = data_size + 1;\n        code_mask = (1 << code_size) - 1;\n        available = clear + 2;\n        old_code = nullCode;\n        continue;\n      }\n\n      if (old_code == nullCode) {\n        pixelStack[top++] = suffix[code];\n        old_code = code;\n        first = code;\n        continue;\n      }\n\n      in_code = code;\n\n      if (code == available) {\n        pixelStack[top++] = first;\n        code = old_code;\n      }\n\n      while (code > clear) {\n        pixelStack[top++] = suffix[code];\n        code = prefix[code];\n      }\n\n      first = suffix[code] & 0xff;\n      pixelStack[top++] = first; // add a new string to the table, but only if space is available\n      // if not, just continue with current table until a clear code is found\n      // (deferred clear code implementation as per GIF spec)\n\n      if (available < MAX_STACK_SIZE) {\n        prefix[available] = old_code;\n        suffix[available] = first;\n        available++;\n\n        if ((available & code_mask) === 0 && available < MAX_STACK_SIZE) {\n          code_size++;\n          code_mask += available;\n        }\n      }\n\n      old_code = in_code;\n    } // Pop a pixel off the pixel stack.\n\n\n    top--;\n    dstPixels[pi++] = pixelStack[top];\n    i++;\n  }\n\n  for (i = pi; i < npix; i++) {\n    dstPixels[i] = 0; // clear missing pixels\n  }\n\n  return dstPixels;\n};\n\nexports.lzw = lzw;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decompressFrames = exports.decompressFrame = exports.parseGIF = void 0;\n\nvar _gif = _interopRequireDefault(require(\"js-binary-schema-parser/lib/schemas/gif\"));\n\nvar _jsBinarySchemaParser = require(\"js-binary-schema-parser\");\n\nvar _uint = require(\"js-binary-schema-parser/lib/parsers/uint8\");\n\nvar _deinterlace = require(\"./deinterlace\");\n\nvar _lzw = require(\"./lzw\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar parseGIF = function parseGIF(arrayBuffer) {\n  var byteData = new Uint8Array(arrayBuffer);\n  return (0, _jsBinarySchemaParser.parse)((0, _uint.buildStream)(byteData), _gif[\"default\"]);\n};\n\nexports.parseGIF = parseGIF;\n\nvar generatePatch = function generatePatch(image) {\n  var totalPixels = image.pixels.length;\n  var patchData = new Uint8ClampedArray(totalPixels * 4);\n\n  for (var i = 0; i < totalPixels; i++) {\n    var pos = i * 4;\n    var colorIndex = image.pixels[i];\n    var color = image.colorTable[colorIndex] || [0, 0, 0];\n    patchData[pos] = color[0];\n    patchData[pos + 1] = color[1];\n    patchData[pos + 2] = color[2];\n    patchData[pos + 3] = colorIndex !== image.transparentIndex ? 255 : 0;\n  }\n\n  return patchData;\n};\n\nvar decompressFrame = function decompressFrame(frame, gct, buildImagePatch) {\n  if (!frame.image) {\n    console.warn('gif frame does not have associated image.');\n    return;\n  }\n\n  var image = frame.image; // get the number of pixels\n\n  var totalPixels = image.descriptor.width * image.descriptor.height; // do lzw decompression\n\n  var pixels = (0, _lzw.lzw)(image.data.minCodeSize, image.data.blocks, totalPixels); // deal with interlacing if necessary\n\n  if (image.descriptor.lct.interlaced) {\n    pixels = (0, _deinterlace.deinterlace)(pixels, image.descriptor.width);\n  }\n\n  var resultImage = {\n    pixels: pixels,\n    dims: {\n      top: frame.image.descriptor.top,\n      left: frame.image.descriptor.left,\n      width: frame.image.descriptor.width,\n      height: frame.image.descriptor.height\n    }\n  }; // color table\n\n  if (image.descriptor.lct && image.descriptor.lct.exists) {\n    resultImage.colorTable = image.lct;\n  } else {\n    resultImage.colorTable = gct;\n  } // add per frame relevant gce information\n\n\n  if (frame.gce) {\n    resultImage.delay = (frame.gce.delay || 10) * 10; // convert to ms\n\n    resultImage.disposalType = frame.gce.extras.disposal; // transparency\n\n    if (frame.gce.extras.transparentColorGiven) {\n      resultImage.transparentIndex = frame.gce.transparentColorIndex;\n    }\n  } // create canvas usable imagedata if desired\n\n\n  if (buildImagePatch) {\n    resultImage.patch = generatePatch(resultImage);\n  }\n\n  return resultImage;\n};\n\nexports.decompressFrame = decompressFrame;\n\nvar decompressFrames = function decompressFrames(parsedGif, buildImagePatches) {\n  return parsedGif.frames.filter(function (f) {\n    return f.image;\n  }).map(function (f) {\n    return decompressFrame(f, parsedGif.gct, buildImagePatches);\n  });\n};\n\nexports.decompressFrames = decompressFrames;","import { Sprite } from '@pixi/sprite';\nimport { Texture, Renderer } from '@pixi/core';\nimport { settings } from '@pixi/settings';\nimport { SCALE_MODES } from '@pixi/constants';\nimport { Ticker, UPDATE_PRIORITY } from '@pixi/ticker';\nimport { parseGIF, decompressFrames } from 'gifuct-js';\n\n/**\n * Frame object.\n */\ninterface FrameObject {\n    /** Image data for the current frame */\n    imageData: ImageData;\n    /** The start of the current frame, in milliseconds */\n    start: number;\n    /** How long this frame lasts, in milliseconds */\n    end: number;\n}\n/**\n * Options for the AnimatedGIF constructor.\n */\ninterface AnimatedGIFOptions {\n    /** Whether to start playing right away */\n    autoPlay: boolean;\n    /** Scale Mode to use for the texture */\n    scaleMode: SCALE_MODES;\n    /** To enable looping */\n    loop: boolean;\n    /** Speed of the animation */\n    animationSpeed: number;\n    /** Set to `false` to manage updates yourself */\n    autoUpdate: boolean;\n    /** The completed callback, optional */\n    onComplete: () => void;\n    /** The loop callback, optional */\n    onLoop: () => void;\n    /** The frame callback, optional */\n    onFrameChange: (currentFrame: number) => void;\n    /** Fallback FPS if GIF contains no time information */\n    fps?: number;\n}\n\n/**\n * Runtime object to play animated GIFs. This object is similar to an AnimatedSprite.\n * It support playback (seek, play, stop) as well as animation speed and looping.\n * @memberof PIXI.gif\n * @see Thanks to {@link https://github.com/matt-way/gifuct-js/ gifuct-js}\n */\nclass AnimatedGIF extends Sprite\n{\n    /**\n     * Default options for all AnimatedGIF objects.\n     * @property [scaleMode=SCALE_MODES.LINEAR] {SCALE_MODES} - Scale mode to use for the texture.\n     * @property [loop=true] {boolean} - To enable looping.\n     * @property [animationSpeed=1] {number} - Speed of the animation.\n     * @property [autoUpdate=true] {boolean} - Set to `false` to manage updates yourself.\n     * @property [autoPlay=true] {boolean} - To start playing right away.\n     * @property [onComplete=null] {function} - The completed callback, optional.\n     * @property [onLoop=null] {function} - The loop callback, optional.\n     * @property [onFrameChange=null] {function} - The frame callback, optional.\n     */\n    public static defaultOptions: AnimatedGIFOptions = {\n        scaleMode: SCALE_MODES.LINEAR,\n        fps: Ticker.shared.FPS,\n        loop: true,\n        animationSpeed: 1,\n        autoPlay: true,\n        autoUpdate: true,\n        onComplete: null,\n        onFrameChange: null,\n        onLoop: null,\n    };\n\n    /**\n     * The speed that the animation will play at. Higher is faster, lower is slower.\n     * @default 1\n     */\n    public animationSpeed: number;\n\n    /**\n     * Whether or not the animate sprite repeats after playing.\n     * @default true\n     */\n    public loop: boolean;\n\n    /**\n     * User-assigned function to call when animation finishes playing. This only happens\n     * if loop is set to `false`.\n     *\n     * @example\n     * animation.onComplete = () => {\n     *   // finished!\n     * };\n     */\n    public onComplete?: () => void;\n\n    /**\n     * User-assigned function to call when animation changes which texture is being rendered.\n     *\n     * @example\n     * animation.onFrameChange = () => {\n     *   // updated!\n     * };\n     */\n    public onFrameChange?: (currentFrame: number) => void;\n\n    /**\n     * User-assigned function to call when `loop` is true, and animation is played and\n     * loops around to start again. This only happens if loop is set to `true`.\n     *\n     * @example\n     * animation.onLoop = () => {\n     *   // looped!\n     * };\n     */\n    public onLoop?: () => void;\n\n    /** The total duration of animation in milliseconds. */\n    public readonly duration: number;\n\n    /** Whether to play the animation after constructing. */\n    public readonly autoPlay: boolean;\n\n    /** Collection of frame to render. */\n    private _frames: FrameObject[];\n\n    /** Drawing context reference. */\n    private _context: CanvasRenderingContext2D;\n\n    /** Dirty means the image needs to be redrawn. Set to `true` to force redraw. */\n    public dirty: boolean;\n\n    /** The current frame number (zero-based index). */\n    private _currentFrame: number;\n\n    /** `true` uses PIXI.Ticker.shared to auto update animation time.*/\n    private _autoUpdate: boolean;\n\n    /** `true` if the instance is currently connected to PIXI.Ticker.shared to auto update animation time. */\n    private _isConnectedToTicker: boolean;\n\n    /** If animation is currently playing. */\n    private _playing: boolean;\n\n    /** Current playback position in milliseconds. */\n    private _currentTime: number;\n\n    /**\n     * Create an animated GIF animation from a GIF image's ArrayBuffer. The easiest way to get\n     * the buffer is to use the Loader.\n     * @example\n     * const loader = new PIXI.Loader();\n     * loader.add('myFile', 'file.gif');\n     * loader.load((loader, resources) => {\n     *    const gif = resources.myFile.animation;\n     *    // add to the stage...\n     * });\n     * @param buffer - GIF image arraybuffer from loader.\n     * @param options - Options to use.\n     * @returns\n     */\n    static fromBuffer(buffer: ArrayBuffer, options?: Partial<AnimatedGIFOptions>): AnimatedGIF\n    {\n        if (!buffer || buffer.byteLength === 0)\n        {\n            throw new Error('Invalid buffer');\n        }\n\n        const gif = parseGIF(buffer);\n        const gifFrames = decompressFrames(gif, true);\n        const frames: FrameObject[] = [];\n\n        // Temporary canvases required for compositing frames\n        const canvas = document.createElement('canvas');\n        const context = canvas.getContext('2d');\n        const patchCanvas = document.createElement('canvas');\n        const patchContext = patchCanvas.getContext('2d');\n\n        canvas.width = gifFrames[0].dims.width;\n        canvas.height = gifFrames[0].dims.height;\n\n        let time = 0;\n\n        // Some GIFs have a non-zero frame delay, so we need to calculate the fallback\n        const { fps } = Object.assign({}, AnimatedGIF.defaultOptions, options);\n        const defaultDelay = 1000 / fps;\n\n        // Precompute each frame and store as ImageData\n        for (let i = 0; i < gifFrames.length; i++)\n        {\n            // Some GIF's omit the disposalType, so let's assume clear if missing\n            const { disposalType = 2, delay = defaultDelay, patch, dims: { width, height, left, top } } = gifFrames[i];\n\n            patchCanvas.width = width;\n            patchCanvas.height = height;\n            patchContext.clearRect(0, 0, width, height);\n            const patchData = patchContext.createImageData(width, height);\n\n            patchData.data.set(patch);\n            patchContext.putImageData(patchData, 0, 0);\n\n            context.drawImage(patchCanvas, left, top);\n            const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n\n            if (disposalType === 2)\n            {\n                context.clearRect(0, 0, width, height);\n            }\n\n            frames.push({\n                start: time,\n                end: time + delay,\n                imageData,\n            });\n            time += delay;\n        }\n\n        // clear the canvases\n        canvas.width = canvas.height = 0;\n        patchCanvas.width = patchCanvas.height = 0;\n\n        return new AnimatedGIF(frames, options);\n    }\n\n    /**\n     * @param buffer - Data of the GIF image.\n     * @param options - Options for the AnimatedGIF\n     * @param [options.scaleMode=SCALE_MODES.LINEAR] - How to scale the image.\n     * @param [options.loop=true] - Whether to loop the animation.\n     * @param [options.animationSpeed=1] - The speed that the animation will play at.\n     * @param [options.autoPlay=true] - Whether to start playing the animation right away.\n     * @param [options.autoUpdate=true] - Whether to use PIXI.Ticker.shared to auto update animation time.\n     * @param [options.onComplete=null] - Function to call when the animation finishes playing.\n     * @param [options.onFrameChange=null] - Function to call when the frame changes.\n     * @param [options.onLoop=null] - Function to call when the animation loops.\n     */\n    constructor(frames: FrameObject[], options?: Partial<AnimatedGIFOptions>)\n    {\n        // Get the options, apply defaults\n        const { scaleMode, ...rest } = Object.assign({},\n            AnimatedGIF.defaultOptions,\n            options\n        );\n\n        // Create the texture\n        const canvas = document.createElement('canvas');\n        const context = canvas.getContext('2d');\n\n        canvas.width = frames[0].imageData.width;\n        canvas.height = frames[0].imageData.height;\n\n        super(Texture.from(canvas, { scaleMode }));\n\n        this.duration = frames[frames.length - 1].end;\n        this._frames = frames;\n        this._context = context;\n        this._playing = false;\n        this._currentTime = 0;\n        this._isConnectedToTicker = false;\n        Object.assign(this, rest);\n\n        // Draw the first frame\n        this.currentFrame = 0;\n        if (this.autoPlay)\n        {\n            this.play();\n        }\n    }\n\n    /** Stops the animation. */\n    public stop(): void\n    {\n        if (!this._playing)\n        {\n            return;\n        }\n\n        this._playing = false;\n        if (this._autoUpdate && this._isConnectedToTicker)\n        {\n            Ticker.shared.remove(this.update, this);\n            this._isConnectedToTicker = false;\n        }\n    }\n\n    /** Plays the animation. */\n    public play(): void\n    {\n        if (this._playing)\n        {\n            return;\n        }\n\n        this._playing = true;\n        if (this._autoUpdate && !this._isConnectedToTicker)\n        {\n            Ticker.shared.add(this.update, this, UPDATE_PRIORITY.HIGH);\n            this._isConnectedToTicker = true;\n        }\n\n        // If were on the last frame and stopped, play should resume from beginning\n        if (!this.loop && this.currentFrame === this._frames.length - 1)\n        {\n            this._currentTime = 0;\n        }\n    }\n\n    /**\n     * Get the current progress of the animation from 0 to 1.\n     * @readonly\n     */\n    public get progress(): number\n    {\n        return this._currentTime / this.duration;\n    }\n\n    /** `true` if the current animation is playing */\n    public get playing(): boolean\n    {\n        return this._playing;\n    }\n\n    /**\n     * Updates the object transform for rendering. You only need to call this\n     * if the `autoUpdate` property is set to `false`.\n     *\n     * @param deltaTime - Time since last tick.\n     */\n    update(deltaTime: number): void\n    {\n        if (!this._playing)\n        {\n            return;\n        }\n\n        const elapsed = this.animationSpeed * deltaTime / settings.TARGET_FPMS;\n        const currentTime = this._currentTime + elapsed;\n        const localTime = currentTime % this.duration;\n\n        const localFrame = this._frames.findIndex((frame) =>\n            frame.start <= localTime && frame.end > localTime);\n\n        if (currentTime >= this.duration)\n        {\n            if (this.loop)\n            {\n                this._currentTime = localTime;\n                this.updateFrameIndex(localFrame);\n                this.onLoop?.();\n            }\n            else\n            {\n                this._currentTime = this.duration;\n                this.updateFrameIndex(this._frames.length - 1);\n                this.onComplete?.();\n                this.stop();\n            }\n        }\n        else\n        {\n            this._currentTime = localTime;\n            this.updateFrameIndex(localFrame);\n        }\n    }\n\n    /**\n     * Redraw the current frame, is necessary for the animation to work when\n     */\n    private updateFrame(): void\n    {\n        if (!this.dirty)\n        {\n            return;\n        }\n\n        // Update the current frame\n        const { imageData } = this._frames[this._currentFrame];\n\n        this._context.putImageData(imageData, 0, 0);\n\n        // Workaround hack for Safari & iOS\n        // which fails to upload canvas after putImageData\n        // See: https://bugs.webkit.org/show_bug.cgi?id=229986\n        this._context.fillStyle = 'transparent';\n        this._context.fillRect(0, 0, 0, 1);\n\n        this.texture.update();\n\n        // Mark as clean\n        this.dirty = false;\n    }\n\n    /**\n     * Renders the object using the WebGL renderer\n     *\n     * @param {PIXI.Renderer} renderer - The renderer\n     * @private\n     */\n    _render(renderer: Renderer): void\n    {\n        this.updateFrame();\n\n        super._render(renderer);\n    }\n\n    /**\n     * Renders the object using the WebGL renderer\n     *\n     * @param {PIXI.CanvasRenderer} renderer - The renderer\n     * @private\n     */\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n    _renderCanvas(renderer: any): void\n    {\n        this.updateFrame();\n\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        super._renderCanvas(renderer);\n    }\n\n    /**\n     * Whether to use PIXI.Ticker.shared to auto update animation time.\n     * @default true\n     */\n    get autoUpdate(): boolean\n    {\n        return this._autoUpdate;\n    }\n\n    set autoUpdate(value: boolean)\n    {\n        if (value !== this._autoUpdate)\n        {\n            this._autoUpdate = value;\n\n            if (!this._autoUpdate && this._isConnectedToTicker)\n            {\n                Ticker.shared.remove(this.update, this);\n                this._isConnectedToTicker = false;\n            }\n            else if (this._autoUpdate && !this._isConnectedToTicker && this._playing)\n            {\n                Ticker.shared.add(this.update, this);\n                this._isConnectedToTicker = true;\n            }\n        }\n    }\n\n    /** Set the current frame number */\n    get currentFrame(): number\n    {\n        return this._currentFrame;\n    }\n    set currentFrame(value: number)\n    {\n        this.updateFrameIndex(value);\n        this._currentTime = this._frames[value].start;\n    }\n\n    /** Internally handle updating the frame index */\n    private updateFrameIndex(value: number): void\n    {\n        if (value < 0 || value >= this._frames.length)\n        {\n            throw new Error(`Frame index out of range, expecting 0 to ${this.totalFrames}, got ${value}`);\n        }\n        if (this._currentFrame !== value)\n        {\n            this._currentFrame = value;\n            this.dirty = true;\n            this.onFrameChange?.(value);\n        }\n    }\n\n    /**\n     * Get the total number of frame in the GIF.\n     */\n    get totalFrames(): number\n    {\n        return this._frames.length;\n    }\n\n    /** Destroy and don't use after this. */\n    destroy(): void\n    {\n        this.stop();\n        super.destroy(true);\n        this._context = null;\n        this._frames = null;\n        this.onComplete = null;\n        this.onFrameChange = null;\n        this.onLoop = null;\n    }\n\n    /**\n     * Cloning the animation is a useful way to create a duplicate animation.\n     * This maintains all the properties of the original animation but allows\n     * you to control playback independent of the original animation.\n     * If you want to create a simple copy, and not control independently,\n     * then you can simply create a new Sprite, e.g. `const sprite = new Sprite(animation.texture)`.\n     */\n    clone(): AnimatedGIF\n    {\n        return new AnimatedGIF([...this._frames], {\n            autoUpdate: this._autoUpdate,\n            loop: this.loop,\n            autoPlay: this.autoPlay,\n            scaleMode: this.texture.baseTexture.scaleMode,\n            animationSpeed: this.animationSpeed,\n            onComplete: this.onComplete,\n            onFrameChange: this.onFrameChange,\n            onLoop: this.onLoop,\n        });\n    }\n}\n\nexport { AnimatedGIF };\nexport type { AnimatedGIFOptions };\n","import { LoaderResource } from '@pixi/loaders';\nimport type { ILoaderPlugin } from '@pixi/loaders';\nimport { AnimatedGIF } from './AnimatedGIF';\n\n/** Default extension for GIF images */\nconst GIF_EXTENSION = 'gif';\n\n// Satsify the LoaderResource interface\ndeclare global {\n    // eslint-disable-next-line @typescript-eslint/no-namespace\n    namespace GlobalMixins {\n        interface LoaderResource {\n            animation?: AnimatedGIF;\n        }\n    }\n}\n\n/**\n * Handle the loading of GIF images. Registering this loader plugin will\n * load all `.gif` images as an ArrayBuffer and transform into an\n * AnimatedGIF object. Use Resource's `animation` property to access the object.\n * @memberof PIXI.gif\n * @class AnimatedGIFLoader\n * @example\n * import { Loader } from '@pixi/loaders';\n * import { AnimatedGIFLoader } from '@pixi/gif';\n *\n * Loader.registerPlugin(AnimatedGIFLoader);\n */\nconst AnimatedGIFLoader: ILoaderPlugin = {\n    /** For loading methods */\n    add()\n    {\n        LoaderResource.setExtensionXhrType(\n            GIF_EXTENSION,\n            LoaderResource.XHR_RESPONSE_TYPE.BUFFER\n        );\n        LoaderResource.setExtensionLoadType(\n            GIF_EXTENSION,\n            LoaderResource.LOAD_TYPE.XHR\n        );\n    },\n    /** Implement loader */\n    use(resource: LoaderResource, next: (...args: any[]) => void): void\n    {\n        if (resource.extension === GIF_EXTENSION)\n        {\n            resource.animation = AnimatedGIF.fromBuffer(resource.data);\n        }\n        next();\n    }\n};\n\nexport { AnimatedGIFLoader };\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","defineProperty","lib","value","parse","stream","schema","result","arguments","length","undefined","parent","isArray","forEach","partSchema","key","keys","conditionFunc","continueFunc","arr","lastStreamPos","pos","newParent","push","uint8","uint8Data","data","readByte","offset","readBytes","subarray","from","map","String","fromCharCode","join","littleEndian","bytes","byteSize","totalOrFunc","total","parser","i","_byte","bits","reduce","res","def","startIndex","Math","pow","subBitsTotal","index","exports","_","require$$0","_uint","require$$1","subBlocksSchema","blocks","chunks","streamSize","size","availableSize","Uint8Array","set","gceSchema","conditional","gce","codes","extras","readBits","future","disposal","userInput","transparentColorGiven","delay","readUnsigned","transparentColorIndex","terminator","peekBytes","imageSchema","image","code","descriptor","left","top","width","height","lct","exists","interlaced","sort","readArray","minCodeSize","peekByte","textSchema","text","blockSize","preData","applicationSchema","application","id","readString","commentSchema","comment","_default","header","signature","version","lsd","gct","resolution","backgroundColorIndex","pixelAspectRatio","frames","loop","nextCode","deinterlace_1","pixels","newPixels","rows","cpRow","toRow","fromRow","fromPixels","slice","splice","apply","concat","offsets","steps","pass","lzw_1","pixelCount","available","clear","code_mask","code_size","end_of_information","in_code","old_code","data_size","datum","first","pi","bi","MAX_STACK_SIZE","npix","dstPixels","prefix","suffix","pixelStack","obj","parseGIF_1","_gif","__esModule","default","_jsBinarySchemaParser","require$$2","_deinterlace","require$$3","_lzw","require$$4","arrayBuffer","byteData","buildStream","decompressFrame","frame","buildImagePatch","totalPixels","lzw","deinterlace","resultImage","dims","colorTable","disposalType","transparentIndex","patch","patchData","Uint8ClampedArray","colorIndex","color","generatePatch","decompressFrames_1","parsedGif","buildImagePatches","filter","f","options","_a","assign","AnimatedGIF","defaultOptions","scaleMode","rest","s","e","t","indexOf","getOwnPropertySymbols","propertyIsEnumerable","canvas","document","createElement","context","getContext","imageData","_this","_super","Texture","duration","end","_frames","_context","_playing","_currentTime","_isConnectedToTicker","currentFrame","autoPlay","play","TypeError","__","this","constructor","create","__extends","buffer","byteLength","Error","gif","parseGIF","gifFrames","decompressFrames","patchCanvas","patchContext","time","defaultDelay","_b","_c","_d","top_1","clearRect","createImageData","putImageData","drawImage","getImageData","start","_autoUpdate","Ticker","shared","remove","update","add","UPDATE_PRIORITY","HIGH","deltaTime","elapsed","animationSpeed","settings","TARGET_FPMS","currentTime","localTime","localFrame","findIndex","updateFrameIndex","onLoop","onComplete","stop","dirty","_currentFrame","fillStyle","fillRect","texture","renderer","updateFrame","_render","_renderCanvas","totalFrames","onFrameChange","destroy","to","pack","ar","l","autoUpdate","baseTexture","SCALE_MODES","LINEAR","fps","FPS","Sprite","GIF_EXTENSION","AnimatedGIFLoader","LoaderResource","setExtensionXhrType","XHR_RESPONSE_TYPE","BUFFER","setExtensionLoadType","LOAD_TYPE","XHR","use","resource","next","extension","animation","fromBuffer"],"mappings":"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"}